# 実践テスト駆動開発

[実践テスト駆動開発 (Object Oriented SELECTION) | Steve Freeman, Nat Pryce, 和智 右桂, 高木 正弘 |本 | 通販 | Amazon](https://www.amazon.co.jp/%E5%AE%9F%E8%B7%B5%E3%83%86%E3%82%B9%E3%83%88%E9%A7%86%E5%8B%95%E9%96%8B%E7%99%BA-Object-Oriented-SELECTION-Freeman/dp/4798124583)

やっていき。

## 七章

### テストファースト

何を実現したいかを記述し、そのあとでどうやって実現するかと言う流れを作ることができる。

最初に実現したいことに集中することにより、抽象度の高いレベルで保てるようになる。

また、テストから書き始めると、隠蔽もやりやすくなる。外部を先に決めてしまっているため。

また、より小さいコンポーネントに分割しないとテストしづらくなるため、最小限のコンポーネントで構成されるようになる。

つまり、よりシンプルな構成になる。

そして、依存性の可視化もメリットに挙げられる。なぜなら、テスト時依存するオブジェクトを渡す必要があるからだ。

### 分類よりもコミュニケーション

クラス構造をうまく設計するよりも、オブジェクト間のコミュニケーションパターンの方が重要らしい。

何度も読み返したが、よくわかってない。

### 値型

値型を導入する上で基本的なテクニック三つ

* 分解

複雑になったコードは大抵関心ごとを複数抱えている。

そうした場合、振る舞いの単位を分解する。

* 発芽

新しい概念に印をつけたいと思ったときに、プレースホルダー型を導入してある一つのフィールドをラップする。

もしくは何もないプレースホルダー型かもしれない。

コードの成長に合わせてフィールドやメソッドを追加して行く。

* 包括

特定の値グループが一緒に使われてるとき、それらはまとめられる可能性がある。

それらで型を作る。

### 分解 詳細

一つの大きなオブジェクトを協力し合う複数のオブジェクトに変更する。

リファクタリングに属するものと私は見ている。

これらを先延ばしにすると、コードが増えるほど複雑になり、わかりにくくなる。

### インタフェースを用いて関係性の特定

Javaにて、インタフェースを多用するのは、インタフェースをロールとして定義する。

また、インタフェースのメソッドの数が減るほど、ロールの役割が明確になる。

### インタフェースのリファクタ

似ているインタフェースがあれば、マージするべきか考察するべき。

また、似ているインタフェースがあれば、ネーミングについても再考の余地があるかもしれない。

### 抽象レベルプログラミング

通常、コード上において、意図は表現されない。

この問題に対して、コードのレイヤを二つに分ける。

**宣言レイヤ**と**実装レイヤ**である。

#### 宣言レイヤ

複数のオブジェクトからなるグラフ。

オブジェクトがイベントに対してどう反応するかという結果の組み合わせ。

ここではどのようにするかを記述する。

#### 実装レイヤ

実装レイヤのオブジェクトを組み立てる。ここでは何をするかを記述する。

また、実質的にドメイン特化言語となる。

---

理想は、小さな部品を組み合わせてフィーチャーを組み上げていくスタイル。

Lispの思想と似ていると書いてあるが、ポールグレアムのOn Lispのあれだろうか。



## 所感

わからんことだらけだけど、何度も読み直すとわかりみが生まれることがある。

特に時間置いたりした後に見るとその効果は高まる気がする。
